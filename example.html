<html>
	<head>
	<script type="text/javascript" src="js/UrlParser.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r77/three.min.js"></script>
	<script type="text/javascript" src="js/Detector.js"></script>
	<script type="text/javascript" src="js/OrbitControls.js"></script>
	<script type="text/javascript" src="js/Lozi.min.js"></script>
	<style> 
	body
	{
		margin-left: 0px;
		margin-right: 0px;
		margin-top: 0px;
		margin-bottom: 0px;
	}
	#loadScreen
	{
		position:absolute;
		background-color:#eeeeee;
	}
	#loadBtn
	{
		position:absolute;
		color:#333333;
		text-align:center;
		float:left;
		display:block;
		cursor:pointer;
		font-size:30px;
	}
	#percentage
	{
		position:absolute;
		background-color:#999999;
		display:block;
		float:left;
	}
	</style>
	</head>
	<body>
	<div id="loadScreen">
		<a id="loadBtn" onclick="loadScript()">LOAD</a>
	</div>
	<div id="percentage"></div>
	<script type="text/javascript" src="js/Scene.js"></script>
	<script type="text/javascript">
	
	var loadScreen = document.getElementById("loadScreen");
	var percentage = document.getElementById("percentage");
	var loadBtn	   = document.getElementById("loadBtn");
	var index = 0;
	
	if(properties.example)
	{
		switch(properties.example)
		{
			case "mummy" 	 :{index = 0; break;}
			case "canyon"	 :{index = 1; break;}
			case "horse" 	 :{index = 2; break;}
			case "reflection":{index = 3; break;}
		}
	}
	var examples = 
	[
		"Examples/mummy/mummy.js",
		"Examples/canyon/canyon.js",
		"Examples/horse/horse.js",
		"Examples/reflection/reflection.js",
	];
	
	function loadScript()
	{
		percentage.style.setProperty('display','block');
		loadBtn   .style.setProperty('display','none' );
		
		var script = document.createElement('script');

		script.setAttribute('src',examples[index]);

		document.body.appendChild(script);
	}
	
	
	function onProgress(e)
	{
		console.log(e.totalProgress);
		percentage.style.setProperty('width' ,(window.innerWidth*e.totalProgress).toString()+'px');
	}
	
	function onLoaded()
	{
		loadScreen.style.setProperty('display','none');
		percentage.style.setProperty('display','none');
		console.log("loaded");
	}
	
	function onWindowResize()
	{
		if(camera)
		{
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
		}
		if(renderer)
		{
			renderer.setSize( window.innerWidth, window.innerHeight );
		}
		
		var width  = window.getComputedStyle(loadBtn)['width' ].replace("px","");
		var height = window.getComputedStyle(loadBtn)['height'].replace("px","");
		
		loadScreen.style.setProperty('width' ,window.innerWidth .toString()+'px');
		loadScreen.style.setProperty('height',window.innerHeight.toString()+'px');
		
		loadBtn.style.setProperty('margin-left',((window.innerWidth /2)-(width /2)).toString()+'px');
		loadBtn.style.setProperty('margin-top' ,((window.innerHeight/2)-(height/2)).toString()+'px');
		
		percentage.style.setProperty('height',window.innerHeight.toString()+'px');
	}
	
	percentage.style.setProperty('display','none');
	window.addEventListener( 'resize', onWindowResize, false );
	onWindowResize();
	</script>
	</body>
</html>